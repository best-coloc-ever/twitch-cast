frontend:
    build: frontend/
    ports:
        - '80:80'
    volumes:
        - './frontend/chromecast:/chromecast'
        - 'twitch-cast-data:/data'
    restart: always
    container_name: frontend

streamer:
    build: streamer
    container_name: streamer

hls-proxy:
    build: hls-proxy
    volumes:
        - 'twitch-cast-data:/data'
    environment:
        - 'SERVER_HOSTNAME=${SERVER_NAME}'
        - 'STREAMER_HOSTNAME=streamer'
        - 'OUTPUT_DIRECTORY=/data/video'
        - 'OUTPUT_INDEX_FILE_NAME=stream.m3u8'
        - 'OUTPUT_TS_FILE_PATTERN=stream-#####.ts'
    container_name: hls-proxy
